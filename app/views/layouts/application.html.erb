<!DOCTYPE html>
<html>
<head>
  <title>Blocipedia</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
  <%= javascript_include_tag 'application', 'data-turbolinks-track' => true %>
  <%= csrf_meta_tags %>
</head>

<body>
  <ul class="nav nav-tabs">
    <div class ="container">
      <div class="pull-left user-info">
        <%= link_to "Upgrade Account" if current_user %>
      </div>
      <script src="https://checkout.stripe.com/checkout.js"></script>

<button id="customButton">Upgrade Account</button>

<script>
  var handler = StripeCheckout.configure({
    key: 'pk_test_wJChneQu3AcgnH8SdhZTtNqR',
    image: '/img/documentation/checkout/marketplace.png',
    locale: 'auto',
    token: function(token) {
      // Use the token to create the charge with a server-side script.
      // You can access the token ID with `token.id`
    }
  });

  $('#customButton').on('click', function(e) {
    // Open Checkout with further options
    handler.open({
      name: 'Blocipedia Premium Account',
      description: 'Awesomeness awaits!',
      amount: 1500
    });
    e.preventDefault();
  });

  // Close Checkout on page navigation
  $(window).on('popstate', function() {
    handler.close();
  });
</script>
      <div class="pull-right user-info">
        <%= link_to "Sign In", new_user_session_path, class: 'btn btn-primary' %>
        <%= link_to "Sign out", destroy_user_session_path, method: :delete %>
      </div>
    </div>
  </ul>

  <% if flash[:notice] %>
         <div class="alert alert-success">
           <button type="button" class="close" data-dismiss="alert">&times;</button>
           <%= flash[:notice] %>
         </div>
       <% elsif flash[:error] %>
         <div class="alert alert-danger">
           <button type="button" class="close" data-dismiss="alert">&times;</button>
           <%= flash[:error] %>
         </div>
       <% elsif flash[:alert] %>
         <div class="alert alert-warning">
           <button type="button" class="close" data-dismiss="alert">&times;</button>
           <%= flash[:alert] %>
         </div>
       <% end %>

<%= yield %>

</body>
</html>
